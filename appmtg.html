<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Mothman Master Engine</title>
    <style>
        :root {
            --card-w: 110px; /* Large, readable size */
            --card-h: 154px;
            --sidebar-w: 85px;
            --bg-dark: #050505;
            --accent: #b4ff00; /* Rad Green */
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; font-family: 'Segoe UI', sans-serif; touch-action: manipulation; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0;
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at 50% 30%, #1a1a1a 0%, #000 100%);
            color: #eee;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- MANA HEADER --- */
        #ui-header {
            height: 50px;
            background: rgba(20, 20, 20, 0.95);
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            z-index: 200;
        }

        .mana-bar { display: flex; gap: 4px; font-weight:bold; font-size: 0.9rem; }
        .m-pill { 
            background: #222; border: 1px solid #444; 
            padding: 4px 8px; border-radius: 4px; 
            min-width: 30px; text-align: center;
            display: flex; justify-content: center; align-items: center;
        }
        
        button { background: #333; border: 1px solid #555; color: #fff; padding: 6px 12px; border-radius: 6px; font-size: 0.85rem; cursor: pointer; }
        button:active { background: var(--accent); color: black; }

        /* --- BATTLEFIELD --- */
        #playmat {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr var(--sidebar-w);
            grid-template-rows: 1fr 1fr 1fr;
            padding-bottom: 180px; /* Space for large hand */
            overflow: hidden;
        }

        .zone {
            display: flex; align-items: center; overflow-x: auto; gap: 8px; padding: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.08); position: relative;
        }
        .zone::after { content: attr(data-label); position: absolute; top: 2px; left: 5px; font-size: 0.6rem; color: #555; font-weight:bold; letter-spacing: 1px;}

        #zone-creatures { grid-column: 1; grid-row: 1; }
        #zone-artifacts { grid-column: 1; grid-row: 2; }
        #zone-lands     { grid-column: 1; grid-row: 3; border-bottom: none; }

        .side-zone {
            border-left: 1px solid rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: rgba(255,255,255,0.02);
            position: relative;
        }
        #zone-commander { grid-column: 2; grid-row: 1; }
        #zone-graveyard { grid-column: 2; grid-row: 2; }
        #zone-library   { grid-column: 2; grid-row: 3; border-bottom: none; }

        /* --- CARDS ON FIELD --- */
        .card-field {
            width: 80px; height: 112px; /* Compact on field */
            border-radius: 5px; background: #222; background-size: cover; background-position: center;
            box-shadow: 1px 2px 5px rgba(0,0,0,0.5); flex-shrink: 0; position: relative;
            transition: transform 0.2s, filter 0.2s; border: 1px solid #333;
        }
        .tapped { transform: rotate(90deg); filter: brightness(0.6); }

        .counter-badge {
            position: absolute; top: -6px; right: -6px; background: var(--accent); color: black;
            width: 22px; height: 22px; border-radius: 50%; font-size: 0.8rem; font-weight: bold;
            display: flex; justify-content: center; align-items: center; border: 1px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5); z-index: 10;
        }

        /* --- BIG STABLE HAND --- */
        #hand-container {
            position: fixed;
            bottom: 0; left: 0; width: 100%;
            height: 180px; /* Tall area for visibility */
            z-index: 100;
            background: linear-gradient(to top, #000 80%, transparent);
            padding-bottom: var(--safe-bottom);
            overflow-x: auto;
            overflow-y: hidden;
            display: flex;
            align-items: center;
            padding-left: 10px; padding-right: 10px;
            /* Hide scrollbar */
            scrollbar-width: none; -ms-overflow-style: none;
        }
        #hand-container::-webkit-scrollbar { display: none; }

        .hand-card {
            width: var(--card-w); height: var(--card-h);
            background-size: cover; background-position: center;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.8);
            border: 1px solid #555;
            flex-shrink: 0;
            margin-right: 10px;
            position: relative;
            background-color: #111;
        }
        
        .hand-card:active { transform: scale(0.95); }

        /* --- INSPECTOR OVERLAY --- */
        #inspector {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(8px);
            z-index: 1000; display: none;
            flex-direction: column; justify-content: center; align-items: center;
        }

        #insp-card {
            width: 260px; height: 364px;
            background-size: cover; background-position: center;
            border-radius: 12px; margin-bottom: 20px;
            box-shadow: 0 0 40px rgba(0,0,0,0.8);
            transition: transform 0.3s;
        }

        .insp-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 280px; }
        .insp-btn { padding: 15px; background: rgba(255,255,255,0.1); border: 1px solid #555; color: white; border-radius: 8px; font-size: 1rem; cursor: pointer; }
        .ctr-row { grid-column: span 2; display: flex; justify-content: space-between; align-items: center; background: #222; padding: 5px; border-radius: 8px; }

    </style>
</head>
<body>

    <div id="ui-header">
        <div class="mana-bar">
            <span class="m-pill" style="color:#aae0fa; border-color:#0077cc">U:<span id="pool-u">0</span></span>
            <span class="m-pill" style="color:#ccc; border-color:#666">B:<span id="pool-b">0</span></span>
            <span class="m-pill" style="color:#9bd3ae; border-color:#00aa44">G:<span id="pool-g">0</span></span>
            <span class="m-pill" style="color:#aaa; border-color:#888">C:<span id="pool-c">0</span></span>
        </div>
        <div>
            <button onclick="untapAll()">Untap All</button>
            <button onclick="resetGame()" style="background:#442222; border-color:#aa4444">Reset</button>
        </div>
    </div>

    <div id="playmat">
        <div id="zone-creatures" class="zone" data-label="CREATURES"></div>
        <div id="zone-artifacts" class="zone" data-label="ARTIFACTS / ENCH"></div>
        <div id="zone-lands" class="zone" data-label="LANDS"></div>

        <div id="zone-commander" class="side-zone">
            <span style="font-size:0.6rem; color:#555; position:absolute; top:2px;">CMDR</span>
        </div>
        <div id="zone-graveyard" class="side-zone" onclick="alert('Graveyard view coming in v2')">
            <div style="font-size:0.7rem; color:#888">GRAVE</div>
            <div id="gy-count" style="font-size:1.5rem; font-weight:bold">0</div>
        </div>
        <div id="zone-library" class="side-zone" onclick="drawCard()">
            <div style="width:50px; height:70px; background:url('https://m.media-amazon.com/images/I/71jKdIXo-tL._AC_UF894,1000_QL80_.jpg'); background-size:cover; border-radius:4px;"></div>
            <div id="lib-count" style="font-size:0.7rem; margin-top:5px;">99</div>
        </div>
    </div>

    <div id="hand-container"></div>

    <div id="inspector" onclick="closeInsp(event)">
        <div id="insp-card">
            <div id="insp-badge" class="counter-badge" style="display:none; transform:scale(1.5); top:-10px; right:-10px">0</div>
        </div>
        <div class="insp-controls">
            <button class="insp-btn" onclick="act('tap')"><span id="tap-txt">Tap</span></button>
            <button class="insp-btn" style="border-color:#ff4444; color:#ffaaaa" onclick="act('grave')">Destroy</button>
            <div class="ctr-row">
                <button class="insp-btn" style="padding:5px 15px" onclick="act('sub')">-</button>
                <span id="cnt-val" style="font-weight:bold; font-size:1.2rem">0</span>
                <button class="insp-btn" style="padding:5px 15px; color:var(--accent)" onclick="act('add')">+</button>
            </div>
        </div>
        <div style="margin-top:20px; color:#aaa; font-size:0.8rem">Tap background to close</div>
    </div>

<script>
    // --- FULL DECK LIST (Complete) ---
    const rawDeck = [
        // COMMANDER
        { qty: 1, name: "The Wise Mothman", type: "Creature", category: "Commander", setCode: 'pip' },
        
        // CREATURES
        { qty: 1, name: "Bruvac the Grandiloquent", type: "Creature" },
        { qty: 1, name: "The Mindskinner", type: "Creature" },
        { qty: 1, name: "Fetid Gargantua", type: "Creature" },
        { qty: 1, name: "Expanding Ooze", type: "Creature" },
        { qty: 1, name: "Ultimecia, Time Sorceress", type: "Creature" },
        { qty: 1, name: "Danny Pink", type: "Creature" },
        { qty: 1, name: "Zellix, Sanity Flayer", type: "Creature" },
        { qty: 1, name: "Syr Konrad, the Grim", type: "Creature" },
        { qty: 1, name: "Consuming Aberration", type: "Creature" },
        { qty: 1, name: "Eternal Witness", type: "Creature", setCode: '2x2', cn: '368' },
        { qty: 1, name: "Thrummingbird", type: "Creature", setCode: 'one', cn: '288' },
        { qty: 1, name: "Evolution Sage", type: "Creature" },
        { qty: 1, name: "Flux Channeler", type: "Creature" },
        { qty: 1, name: "Rishkar, Peema Renegade", type: "Creature" },
        { qty: 1, name: "Bloatfly Swarm", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Corpsejack Menace", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Glowing One", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Harold and Bob, First Numens", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Lily Bowen, Raging Grandma", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Rampaging Yao Guai", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "The Master, Transcendent", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Tireless Tracker", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Vexing Radgull", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Watchful Radstag", type: "Creature", setCode: 'pip' },
        { qty: 1, name: "Winding Constrictor", type: "Creature", setCode: 'pip' },
        
        // SPELLS & ARTIFACTS
        { qty: 1, name: "Maximum Overdrive", type: "Instant" },
        { qty: 1, name: "Origin of Metalbending", type: "Instant" },
        { qty: 1, name: "Brain Freeze", type: "Instant", setCode: 'slc', cn: '2' }, 
        { qty: 1, name: "Narset's Reversal", type: "Instant" },
        { qty: 1, name: "Golgari Charm", type: "Instant", setCode: 'rtr' },
        { qty: 1, name: "Biomass Mutation", type: "Instant", setCode: 'pip' },
        { qty: 1, name: "Inspiring Call", type: "Instant", setCode: 'pip' },
        { qty: 1, name: "Mutational Advantage", type: "Instant", setCode: 'pip' },
        { qty: 1, name: "Putrefy", type: "Instant", setCode: 'pip' },
        { qty: 1, name: "Radstorm", type: "Instant", setCode: 'pip' },
        { qty: 1, name: "Grasping Tentacles", type: "Sorcery" },
        { qty: 1, name: "Eerie Ultimatum", type: "Sorcery", setCode: 'slc', cn: '5' },
        { qty: 1, name: "Nature's Lore", type: "Sorcery", setCode: 'afc', cn: '164' },
        { qty: 1, name: "Victimize", type: "Sorcery" },
        { qty: 1, name: "Casualties of War", type: "Sorcery", setCode: 'pip' },
        { qty: 1, name: "Cultivate", type: "Sorcery", setCode: 'pip' },
        { qty: 1, name: "Farseek", type: "Sorcery", setCode: 'pip' },
        { qty: 1, name: "Mesmeric Orb", type: "Artifact", setCode: 'brr', cn: '31' },
        { qty: 1, name: "Codex Shredder", type: "Artifact", setCode: 'sld' },
        { qty: 1, name: "Mindcrank", type: "Artifact", setCode: 'sld' },
        { qty: 1, name: "Arcane Signet", type: "Artifact", setCode: 'pip' },
        { qty: 1, name: "Contagion Clasp", type: "Artifact", setCode: 'pip' },
        { qty: 1, name: "Power Fist", type: "Artifact", setCode: 'pip' },
        { qty: 1, name: "Recon Craft Theta", type: "Artifact", setCode: 'pip' },
        { qty: 1, name: "Sol Ring", type: "Artifact", setCode: 'pip' },
        { qty: 1, name: "Talisman of Curiosity", type: "Artifact", setCode: 'pip' },
        { qty: 1, name: "Talisman of Dominance", type: "Artifact", setCode: 'pip' },
        { qty: 1, name: "Dictate of Erebos", type: "Enchantment" },
        { qty: 1, name: "Bloodchief Ascension", type: "Enchantment" },
        { qty: 1, name: "Fertile Ground", type: "Enchantment", setCode: 'sld', cn: '1846' },
        { qty: 1, name: "Branching Evolution", type: "Enchantment", setCode: 'pip' },
        { qty: 1, name: "Fraying Sanity", type: "Enchantment", setCode: 'pip' },
        { qty: 1, name: "Guardian Project", type: "Enchantment", setCode: 'pip' },
        { qty: 1, name: "Hardened Scales", type: "Enchantment", setCode: 'pip' },
        { qty: 1, name: "Inexorable Tide", type: "Enchantment", setCode: 'pip' },
        { qty: 1, name: "Struggle for Project Purity", type: "Enchantment", setCode: 'pip' },
        
        // LANDS
        { qty: 1, name: "Takenuma, Abandoned Mire", type: "Land" },
        { qty: 1, name: "Rejuvenating Springs", type: "Land" },
        { qty: 1, name: "Vesuva", type: "Land" },
        { qty: 1, name: "Ash Barrens", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Command Tower", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Darkwater Catacombs", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Drowned Catacomb", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Evolving Wilds", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Exotic Orchard", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Fetid Pools", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Hinterland Harbor", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Mariposa Military Base", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Nesting Grounds", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Opulent Palace", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Overflowing Basin", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Path of Ancestry", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Sunken Hollow", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Tainted Isle", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Tainted Wood", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Temple of Deceit", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Temple of Malady", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Viridescent Bog", type: "Land", setCode: 'pip' },
        { qty: 1, name: "Woodland Cemetery", type: "Land", setCode: 'pip' },
        { qty: 5, name: "Island", type: "Land", setCode: 'pip' },
        { qty: 5, name: "Swamp", type: "Land", setCode: 'pip' },
        { qty: 5, name: "Forest", type: "Land", setCode: 'pip' },
    ];

    // --- GAME ENGINE ---
    let library = [], grave = [], activeCard = null;
    let manaPool = { u:0, b:0, g:0, c:0 };
    const imgCache = {};
    const costCache = {};

    function init() {
        library = [];
        grave = [];
        manaPool = { u:0, b:0, g:0, c:0 };
        
        // Clear Zones
        document.getElementById('zone-creatures').innerHTML = '';
        document.getElementById('zone-artifacts').innerHTML = '';
        document.getElementById('zone-lands').innerHTML = '';
        document.getElementById('hand-container').innerHTML = '';
        document.getElementById('zone-commander').innerHTML = '';
        
        // Populate Library
        rawDeck.forEach(c => {
            if(c.category === 'Commander') {
                createCard(c, 'zone-commander');
            } else {
                for(let i=0; i<c.qty; i++) {
                    library.push({...c, id: Math.random().toString(36).substr(2,9), counters:0, tapped:false});
                }
            }
        });
        
        // TRUE SHUFFLE
        fisherYatesShuffle(library);
        updateUI();
        for(let i=0; i<7; i++) drawCard();
    }

    function fisherYatesShuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // --- MANA SYSTEM ---
    function updateUI() {
        ['u','b','g','c'].forEach(k => document.getElementById(`pool-${k}`).innerText = manaPool[k]);
        document.getElementById('lib-count').innerText = library.length;
        document.getElementById('gy-count').innerText = grave.length;
    }

    function addMana(type) {
        manaPool[type]++;
        updateUI();
    }

    function checkManaAndPay(costString) {
        if(!costString) return true;
        let temp = {...manaPool};
        
        // Colored
        const colored = costString.match(/{[UBGC]}/g) || [];
        for(let sym of colored) {
            let t = sym.replace(/[{}]/g, '').toLowerCase();
            if(temp[t] > 0) temp[t]--;
            else return false;
        }
        // Generic
        const genMatch = costString.match(/{(\d+)}/);
        let gen = genMatch ? parseInt(genMatch[1]) : 0;
        let total = temp.u + temp.b + temp.g + temp.c;
        if(total >= gen) {
            // Commit
            for(let sym of colored) {
                let t = sym.replace(/[{}]/g, '').toLowerCase();
                manaPool[t]--;
            }
            while(gen > 0) {
                if(manaPool.c > 0) manaPool.c--;
                else if(manaPool.u > 0) manaPool.u--;
                else if(manaPool.b > 0) manaPool.b--;
                else if(manaPool.g > 0) manaPool.g--;
                gen--;
            }
            updateUI();
            return true;
        }
        return false;
    }

    // --- CARD RENDERING ---
    async function createCard(data, zoneId) {
        const el = document.createElement('div');
        el.className = (zoneId === 'hand-container') ? 'hand-card' : 'card-field';
        el.id = data.id || 'cmd';
        
        el.dataset.name = data.name;
        el.dataset.type = data.type;
        el.dataset.tapped = 'false';
        el.dataset.counters = 0;

        const url = await fetchCardData(data, el);
        el.style.backgroundImage = `url('${url}')`;

        const badge = document.createElement('div');
        badge.className = 'counter-badge';
        badge.style.display = 'none';
        badge.innerText = '0';
        el.appendChild(badge);

        el.onclick = (e) => {
            e.stopPropagation();
            if(zoneId === 'hand-container' || zoneId === 'zone-commander') tryToCast(el, data);
            else openInsp(el);
        };

        document.getElementById(zoneId).appendChild(el);
    }

    async function fetchCardData(data, el) {
        const k = data.name + (data.setCode||'');
        if(imgCache[k]) {
            el.dataset.manaCost = costCache[k];
            return imgCache[k];
        }

        let u = `https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(data.name)}`;
        if(data.setCode) u += `&set=${data.setCode}`;
        if(data.cn) u = `https://api.scryfall.com/cards/${data.setCode}/${data.cn}`;

        try {
            const r = await fetch(u);
            const j = await r.json();
            const img = j.image_uris ? j.image_uris.normal : j.card_faces[0].image_uris.normal;
            const mc = j.mana_cost || (j.card_faces ? j.card_faces[0].mana_cost : "");
            
            imgCache[k] = img;
            costCache[k] = mc;
            el.dataset.manaCost = mc;
            return img;
        } catch { return 'https://via.placeholder.com/200'; }
    }

    // --- GAMEPLAY ACTIONS ---
    function tryToCast(el, data) {
        const cost = el.dataset.manaCost || "";
        const isLand = data.type.includes("Land");

        if(isLand || checkManaAndPay(cost)) {
            playCard(el, data);
        } else {
            if(confirm(`Not enough mana for ${data.name} (${cost}).\nPool: U:${manaPool.u} B:${manaPool.b} G:${manaPool.g} C:${manaPool.c}\n\nForce cast anyway?`)) {
                playCard(el, data);
            }
        }
    }

    function playCard(el, data) {
        el.remove();
        let zone = 'zone-artifacts';
        if(data.type.includes('Land')) zone = 'zone-lands';
        else if(data.type.includes('Creature')) zone = 'zone-creatures';

        createCard(data, zone).then(() => {
             // Auto-add tap logic to lands for QoL
             if(data.type.includes("Land")) {
                 const landEl = document.getElementById(zone).lastChild;
                 landEl.onclick = (e) => {
                     e.stopPropagation();
                     if(landEl.dataset.tapped === 'false') {
                         landEl.classList.add('tapped');
                         landEl.dataset.tapped = 'true';
                         // Infer mana color from name
                         if(data.name.includes('Island') || data.name.includes('Water')) addMana('u');
                         else if(data.name.includes('Swamp') || data.name.includes('Bog')) addMana('b');
                         else if(data.name.includes('Forest')) addMana('g');
                         else addMana('c');
                     } else {
                         openInsp(landEl);
                     }
                 }
             }
        });
    }

    function drawCard() {
        if(!library.length) return;
        const c = library.pop();
        createCard(c, 'hand-container');
        updateUI();
    }

    function untapAll() {
        document.querySelectorAll('.tapped').forEach(e => {
            e.classList.remove('tapped'); e.dataset.tapped = 'false';
        });
        manaPool = {u:0, b:0, g:0, c:0};
        updateUI();
    }

    function resetGame() { init(); }

    // --- INSPECTOR LOGIC ---
    function openInsp(el) {
        activeCard = el;
        const v = document.getElementById('insp-card');
        v.style.backgroundImage = el.style.backgroundImage;
        
        const t = el.dataset.tapped === 'true';
        v.style.transform = t ? 'rotate(90deg)' : 'none';
        document.getElementById('tap-txt').innerText = t ? 'Untap' : 'Tap';
        
        const c = parseInt(el.dataset.counters);
        document.getElementById('cnt-val').innerText = c;
        document.getElementById('insp-badge').style.display = c>0?'flex':'none';
        document.getElementById('insp-badge').innerText = c;
        document.getElementById('inspector').style.display = 'flex';
    }

    function closeInsp(e) {
        if(e.target.id === 'inspector') document.getElementById('inspector').style.display = 'none';
    }

    function act(a) {
        if(!activeCard) return;
        if(a==='tap') {
            const t = activeCard.dataset.tapped==='true';
            if(t) {
                activeCard.classList.remove('tapped'); activeCard.dataset.tapped='false';
                document.getElementById('insp-card').style.transform = 'none';
                document.getElementById('tap-txt').innerText='Tap';
            } else {
                activeCard.classList.add('tapped'); activeCard.dataset.tapped='true';
                document.getElementById('insp-card').style.transform = 'rotate(90deg)';
                document.getElementById('tap-txt').innerText='Untap';
            }
        }
        if(a==='add' || a==='sub') {
            let c = parseInt(activeCard.dataset.counters);
            if(a==='add') c++; else c=Math.max(0, c-1);
            activeCard.dataset.counters = c;
            
            const b = activeCard.querySelector('.counter-badge');
            b.innerText = c; b.style.display=c>0?'flex':'none';
            document.getElementById('cnt-val').innerText=c;
            document.getElementById('insp-badge').innerText=c; 
            document.getElementById('insp-badge').style.display=c>0?'flex':'none';
        }
        if(a==='grave') {
            activeCard.remove();
            grave.push(1); updateUI();
            document.getElementById('inspector').style.display = 'none';
        }
    }

    init();
</script>
</body>
</html>
