<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>UTF-8 QR Generator</title>
  <style>
    body { font-family: Arial,sans-serif; background:#f5f5f5; display:flex; justify-content:center; padding:20px; }
    .box { background:#fff; padding:20px; border-radius:6px; box-shadow:0 2px 8px rgba(0,0,0,0.1); width:100%; max-width:500px; }
    textarea { width:100%; height:100px; box-sizing:border-box; font-size:16px; padding:10px; white-space: pre-wrap; }
    .keys, .go { margin-top:10px; display:flex; justify-content:center; gap:10px; }
    button {
      padding:10px 20px; font-size:16px; border:1px solid #ccc; border-radius:4px;
      background:#e0e0e0; cursor:pointer; transition:0.1s;
    }
    button:active { background:#ccc; transform:translateY(2px); }
    #qrcode { text-align:center; margin-top:20px; }
  </style>
</head>
<body>
  <div class="box">
    <textarea id="input" placeholder="Type or use the buttons…"></textarea>
    <div class="keys">
      <button id="tab">Tab</button>
      <button id="enter">Enter</button>
      <button id="up">↑</button>
      <button id="left">←</button>
      <button id="right">→</button>
      <button id="down">↓</button>
    </div>
    <div class="go">
      <button id="gen">Generate QR Code</button>
    </div>
    <div id="qrcode"></div>
  </div>

  <!-- UTF-8 capable QR lib -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.js"></script>
  <script>
    const ta = document.getElementById('input');
    function ins(txt) {
      const s=ta.selectionStart, e=ta.selectionEnd;
      ta.value = ta.value.slice(0,s)+txt+ta.value.slice(e);
      ta.selectionStart = ta.selectionEnd = s+txt.length;
      ta.focus();
    }

    document.getElementById('tab').onclick   = ()=> ins('\t');
    document.getElementById('enter').onclick = ()=> ins('\r\n');
    document.getElementById('up').onclick    = ()=> ins('↑');
    document.getElementById('left').onclick  = ()=> ins('←');
    document.getElementById('right').onclick = ()=> ins('→');
    document.getElementById('down').onclick  = ()=> ins('↓');

    document.getElementById('gen').onclick = () => {
      const txt = ta.value;
      if(!txt) { alert('Enter something first!'); return; }
      const container = document.getElementById('qrcode');
      container.innerHTML = '';
      try {
        // 0 = auto size, 'H' = high error correction
        const qr = qrcode(0,'H');
        qr.addData(txt, 'Byte');    // <-- Byte mode = true UTF-8
        qr.make();
        // scale=6, border=0
        container.innerHTML = qr.createImgTag(6,0);
      } catch(err) {
        console.error(err);
        alert('QR generation failed.');
      }
    };
  </script>
</body>
</html>