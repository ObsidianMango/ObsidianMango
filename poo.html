<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poop Drop Game</title>
    <style>
        body {
            text-align: center;
            font-size: 24px;
            user-select: none;
            overflow: hidden;
            background-color: #f8f8f8;
        }
        #gameContainer {
            position: relative;
            width: 100%;
            height: 600px;
            border: 2px solid #000;
            background-color: #e0e0e0;
        }
        .food {
            position: absolute;
            cursor: pointer;
            font-size: 32px;
        }
        #pooMeter {
            width: 100%;
            height: 30px;
            background-color: lightgray;
            border: 2px solid #000;
            margin-bottom: 5px;
            position: relative;
        }
        #pooFill {
            height: 100%;
            background-color: brown;
            width: 0%;
        }
        #poop {
            position: absolute;
            font-size: 36px;
            top: -50px;
            left: 50%;
            display: none;
        }
        #toilet {
            position: absolute;
            bottom: 10px;
            font-size: 64px;
            left: 50%;
            transform: translateX(-50%);
            transition: left 0.2s;
        }
    </style>
</head>
<body>
    <h1>Poop Drop Game</h1>
    <div id="pooMeter">
        <div id="pooFill"></div>
    </div>
    <div id="gameContainer">
        <div id="poop">ðŸ’©</div>
        <div id="toilet">ðŸš½</div>
    </div>
    <script>
        // Food emoji options and values
        const foods = [
            { emoji: "ðŸ”", value: 10 },
            { emoji: "ðŸ•", value: 8 },
            { emoji: "ðŸŒ­", value: 7 },
            { emoji: "ðŸŽ", value: 5 },
            { emoji: "ðŸŒ", value: 4 },
            { emoji: "ðŸ¥¦", value: 3 }
        ];

        let pooMeter = 50; // Starts at half full
        let dropping = false;

        const gameContainer = document.getElementById("gameContainer");
        const pooFill = document.getElementById("pooFill");
        const poop = document.getElementById("poop");
        const toilet = document.getElementById("toilet");

        // Update poo meter
        function updatePooMeter() {
            pooFill.style.width = `${pooMeter}%`;
        }
        
        updatePooMeter();

        // Spawn random food emojis at the top
        function spawnFood() {
            const food = foods[Math.floor(Math.random() * foods.length)];
            const foodElem = document.createElement("div");
            foodElem.classList.add("food");
            foodElem.innerHTML = food.emoji;
            foodElem.style.left = `${Math.random() * 90}%`;
            foodElem.style.top = "10px";

            foodElem.onclick = () => {
                pooMeter = Math.min(100, pooMeter + food.value);
                updatePooMeter();
                foodElem.remove();
            };

            gameContainer.appendChild(foodElem);

            // Remove after 3 seconds
            setTimeout(() => foodElem.remove(), 3000);
        }

        setInterval(spawnFood, 1000);

        // Move toilet left and right
        let toiletDirection = 1;

        function moveToilet() {
            let toiletPos = toilet.offsetLeft + (10 * toiletDirection);
            if (toiletPos <= 0 || toiletPos + toilet.offsetWidth >= gameContainer.clientWidth) {
                toiletDirection *= -1;
            }
            toilet.style.left = `${toiletPos}px`;
        }

        setInterval(moveToilet, 100);

        // Drop poop
        gameContainer.onclick = () => {
            if (dropping || pooMeter <= 0) return;

            dropping = true;
            poop.style.display = "block";
            poop.style.left = `${window.innerWidth / 2}px`;
            let pos = 50;
            let fallInterval = setInterval(() => {
                pos += 10;
                poop.style.top = `${pos}px`;

                if (pos >= gameContainer.clientHeight - 100) {
                    clearInterval(fallInterval);
                    checkLanding();
                }
            }, 50);
        };

        // Check if poop landed in toilet
        function checkLanding() {
            let poopX = poop.offsetLeft;
            let toiletX = toilet.offsetLeft;
            let toiletWidth = toilet.offsetWidth;

            if (poopX >= toiletX && poopX <= toiletX + toiletWidth) {
                console.log("Poop landed in the toilet! +10 points");
            } else {
                console.log("Missed! No points.");
            }

            poop.style.display = "none";
            poop.style.top = "-50px";
            dropping = false;
            pooMeter -= 10;
            updatePooMeter();

            if (pooMeter <= 0) {
                alert("Game Over! You ran out of poop!");
                location.reload();
            }
        }
    </script>
</body>
</html>