<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Stopwatch+ Laps</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <style>
    :root{
      --bg:#0b0d10; --fg:#e7e9ee; --muted:#9aa3af;
      --btn:#1a1f27; --btn-border:#2a313c;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{margin:0;background:var(--bg);color:var(--fg);font:500 16px/1.4 system-ui;height:100%}
    .app{min-height:100svh;padding:env(safe-area-inset-top) 16px calc(env(safe-area-inset-bottom)+16px);
      display:flex;flex-direction:column;align-items:center;gap:16px;max-width:1290px;margin:0 auto}
    header{width:100%;display:flex;justify-content:space-between;opacity:.9}
    .time{text-align:center;flex:0}
    .time h1{margin:0;font-variant-numeric:tabular-nums;font-size:clamp(48px,11vw,100px)}
    .time small{color:var(--muted)}
    .controls{width:100%;max-width:820px}
    .row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
    button{appearance:none;border:1px solid var(--btn-border);background:var(--btn);color:var(--fg);
      border-radius:14px;padding:14px;font-weight:700;font-size:16px;transition:transform .06s ease}
    button:active{transform:scale(.97)}
    .go{background:#059669} .pause{background:#d97706} .reset{background:#dc2626} .lap{background:#2563eb}
    .laps{width:100%;max-width:820px;overflow-y:auto;flex:1;border-top:1px solid #222;padding-top:8px}
    .lap-item{display:flex;justify-content:space-between;padding:6px 4px;border-bottom:1px solid #1f2937;font-size:15px}
    .lap-label{color:var(--muted)}
  </style>
</head>
<body>
<div class="app">
  <header><div>Stopwatch+</div></header>
  <div class="time"><h1 id="display">00:00:00.00</h1><small id="since">Ready</small></div>
  <div class="controls">
    <div class="row">
      <button id="startPause" class="go">Start</button>
      <button id="lap" class="lap">Lap</button>
      <button id="reset" class="reset">Reset</button>
    </div>
  </div>
  <div class="laps" id="laps"></div>
</div>

<script>
const display=document.getElementById('display');
const since=document.getElementById('since');
const startPauseBtn=document.getElementById('startPause');
const resetBtn=document.getElementById('reset');
const lapBtn=document.getElementById('lap');
const lapsDiv=document.getElementById('laps');
let running=false,base=0,start=0,lapCount=0;

function render(ms){
  const h=Math.floor(ms/3600000),
        m=Math.floor((ms%3600000)/60000),
        s=Math.floor((ms%60000)/1000),
        c=Math.floor((ms%1000)/10);
  display.textContent=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${String(c).padStart(2,'0')}`;
  since.textContent=running?'Running':'Paused';
}
function tick(){
  requestAnimationFrame(tick);
  const elapsed=running?(performance.now()-start)+base:base;
  render(elapsed);
}
function toggle(){
  if(running){base+=performance.now()-start;running=false;startPauseBtn.textContent='Start';startPauseBtn.className='go'}
  else{start=performance.now();running=true;startPauseBtn.textContent='Pause';startPauseBtn.className='pause'}
}
function reset(){
  running=false;base=0;start=0;lapCount=0;lapsDiv.innerHTML='';
  startPauseBtn.textContent='Start';startPauseBtn.className='go';render(0)
}
function lap(){
  const elapsed=running?(performance.now()-start)+base:base;
  lapCount++;
  const node=document.createElement('div');
  node.className='lap-item';
  node.innerHTML=`<div class="lap-label">Lap ${lapCount}</div><div>${display.textContent}</div>`;
  lapsDiv.prepend(node);
}
startPauseBtn.onclick=toggle;resetBtn.onclick=reset;lapBtn.onclick=lap;
render(0);tick();
</script>
</body>
</html>