<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Functional Gen 1 Pok√©dex</title>
    <style>
        /* --- RESET & FONTS --- */
        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            background-color: #dcf0c7; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Courier New', Courier, monospace;
            padding: 10px;
        }

        :root {
            --poke-red: #e7342b;
            --poke-dark-red: #a5211b;
            --outline: 3px solid black;
            --screen-dark: #2a2a2a;
            --blue-btn: #3498db;
            --blue-btn-light: #63b4e6;
        }

        .cartoon-shading {
            box-shadow: inset 4px 4px 0px rgba(255,255,255,0.3), inset -4px -4px 0px rgba(0,0,0,0.2);
        }

        /* --- MAIN CONTAINER --- */
        .pokedex-container {
            display: flex;
            align-items: flex-start;
            max-width: 900px;
            width: 100%;
            /* Removed rotation */
        }

        /* --- HINGE --- */
        .hinge {
            width: 50px;
            height: 580px;
            background-color: var(--poke-red);
            border: var(--outline);
            border-radius: 20px;
            margin: 0 -10px;
            z-index: 5;
            background: linear-gradient(to right, var(--poke-dark-red), var(--poke-red) 40%, var(--poke-red) 60%, var(--poke-dark-red));
            position: relative;
            top: 30px;
        }
        .hinge::before, .hinge::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 20px;
            border-top: var(--outline);
            border-bottom: var(--outline);
            background-color: var(--poke-dark-red);
        }
        .hinge::before { top: 40px; }
        .hinge::after { bottom: 40px; }


        /* --- LEFT PANEL --- */
        .panel {
            background-color: var(--poke-red);
            border: var(--outline);
            padding: 30px;
            display: flex;
            flex-direction: column;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.2);
        }

        #left-panel {
            width: 55%;
            height: 650px;
            border-radius: 30px 30px 0 30px;
            z-index: 4;
            background: linear-gradient(to right, var(--poke-dark-red) 0%, var(--poke-red) 10%);
        }

        .top-sensor-row {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .big-lens-container {
            width: 90px; height: 90px;
            background-color: #dedede;
            border: var(--outline);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            margin-right: 20px;
            box-shadow: inset 4px 4px 0 white, inset -4px -4px 0 #aaa;
        }
        .big-blue-lens {
            width: 65px; height: 65px;
            border-radius: 50%;
            border: var(--outline);
            background: radial-gradient(circle at 30% 30%, white 10%, #3498db 20%, #1e5f8a 80%);
            animation: pulse-lens 4s infinite;
        }
        @keyframes pulse-lens { 0% { filter: brightness(1); } 50% { filter: brightness(1.2); } 100% { filter: brightness(1); } }

        .leds-container { display: flex; gap: 10px; margin-top: 10px; }
        .led {
            width: 15px; height: 15px;
            border-radius: 50%;
            border: var(--outline);
        }
        .led.red { background-color: #ff0000; }
        .led.yellow { background-color: #ffeb3b; }
        .led.green { background-color: #00e676; }

        .white-screen-bezel {
            background-color: white;
            border: var(--outline);
            border-radius: 15px;
            padding: 25px;
            position: relative;
            margin-bottom: 20px;
            box-shadow: inset 5px 5px 0 #ddd;
        }
        
        .main-screen-dark {
            background-color: var(--screen-dark);
            border: var(--outline);
            border-radius: 5px;
            height: 220px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }
        #pokemon-image {
            width: 140px; height: 140px;
            image-rendering: pixelated;
        }

        /* Stats Polygon Canvas */
        #stats-canvas {
            display: none; /* Hidden by default */
            width: 180px; height: 180px;
        }

        .bottom-controls {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }
        
        .left-controls-group { display: flex; flex-direction: column; gap: 10px; }
        .black-circle-btn {
            width: 35px; height: 35px;
            background-color: #333;
            border: var(--outline);
            border-radius: 50%;
            cursor: pointer;
        }
        .black-circle-btn:active { background-color: #000; }

        .green-screen {
            width: 120px; height: 50px;
            background-color: #8bc34a;
            border: var(--outline);
            border-radius: 5px;
            box-shadow: inset 3px 3px 0 rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            color: #2e4a16;
            font-family: monospace;
        }

        /* D-PAD */
        .d-pad { width: 100px; height: 100px; position: relative; }
        .d-key {
            position: absolute;
            background-color: #333;
            border: var(--outline);
            box-shadow: inset 2px 2px 5px rgba(255,255,255,0.2);
            cursor: pointer;
        }
        .d-key:active { background-color: #111; transform: scale(0.95); }
        .d-up { width: 30px; height: 35px; top: 0; left: 35px; border-bottom: none; border-radius: 5px 5px 0 0; }
        .d-down { width: 30px; height: 35px; bottom: 0; left: 35px; border-top: none; border-radius: 0 0 5px 5px; }
        .d-left { width: 35px; height: 30px; top: 35px; left: 0; border-right: none; border-radius: 5px 0 0 5px; }
        .d-right { width: 35px; height: 30px; top: 35px; right: 0; border-left: none; border-radius: 0 5px 5px 0; }
        .d-center { width: 30px; height: 30px; top: 35px; left: 35px; background-color: #333; border:none; box-shadow: none;}


        /* --- RIGHT PANEL --- */
        #right-panel {
            width: 45%;
            height: 600px;
            border-radius: 0 0 30px 0;
            z-index: 3;
            margin-top: 50px;
        }

        .top-info-screen {
            background-color: var(--screen-dark);
            border: var(--outline);
            border-radius: 5px;
            height: 100px;
            margin-bottom: 20px;
            padding: 10px;
            color: #4ade80;
            font-size: 11px;
            overflow-y: auto;
            text-transform: uppercase;
        }

        /* NUMBER PAD (Blue Grid) */
        .blue-grid-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-bottom: 20px;
            padding: 5px;
            background-color: var(--poke-dark-red);
            border: var(--outline);
            border-radius: 5px;
        }
        .blue-square-btn {
            height: 40px;
            background-color: var(--blue-btn);
            border: var(--outline);
            border-radius: 4px;
            box-shadow: inset 0 4px 0 var(--blue-btn-light), inset 0 -4px 0 rgba(0,0,0,0.3);
            color: white;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
        }
        .blue-square-btn:active {
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            background-color: #2980b9;
        }

        .misc-buttons-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .small-grey-btns-pair { display: flex; gap: 5px; }
        .grey-square-btn {
            width: 40px; height: 30px;
            background-color: #aaa;
            border: var(--outline);
            border-radius: 4px;
            box-shadow: inset 2px 2px 0 #eee, inset -2px -2px 0 #777;
            font-size: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        .grey-square-btn:active { background-color: #888; }

        .gold-btn {
            width: 45px; height: 45px;
            background-color: #ffd700;
            border: var(--outline);
            border-radius: 50%;
            box-shadow: inset 5px 5px 0 #ffee58, inset -5px -5px 0 #f57f17;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            font-weight: bold;
        }
        .gold-btn:active { transform: scale(0.95); }

        .vents-row { display: flex; justify-content: space-between; }
        .vent-box {
            width: 45%; height: 50px;
            background-color: #222;
            border: var(--outline);
            border-radius: 5px;
            display: flex; flex-wrap: wrap; justify-content: space-around; align-items: center; padding: 5px;
        }
        .vent-hole { width: 6px; height: 6px; background-color: #111; border-radius: 50%; box-shadow: 1px 1px 0 rgba(255,255,255,0.2); }


        /* --- RESPONSIVE --- */
        @media (max-width: 850px) {
            .pokedex-container { flex-direction: column; align-items: center; }
            .hinge { width: 100%; height: 40px; margin: -10px 0; border-radius: 0; }
            .hinge::before, .hinge::after { display: none; }
            #left-panel, #right-panel { width: 100%; max-width: 450px; height: auto; }
            #left-panel { border-radius: 30px 30px 0 0; padding-bottom: 50px;}
            #right-panel { border-radius: 0 0 30px 30px; margin-top: 0; }
        }
    </style>
</head>
<body>

    <div class="pokedex-container">
        <div id="left-panel" class="panel cartoon-shading">
            
            <div class="top-sensor-row">
                <div class="big-lens-container"><div class="big-blue-lens"></div></div>
                <div class="leds-container">
                    <div class="led red"></div><div class="led yellow"></div><div class="led green"></div>
                </div>
            </div>

            <div class="white-screen-bezel">
                <div class="main-screen-dark">
                    <div id="screen-content">
                        <span style="color:white;">BOOTING...</span>
                    </div>
                    <canvas id="stats-canvas"></canvas>
                </div>
            </div>

            <div class="bottom-controls">
                <div class="left-controls-group">
                     <button class="black-circle-btn" onclick="playCry()" title="Play Cry"></button>
                     <div class="green-screen" id="input-display">...</div>
                </div>
                <div class="d-pad">
                    <div class="d-key d-up" onclick="changePokemon(1)"></div>
                    <div class="d-key d-right" onclick="changePokemon(1)"></div>
                    <div class="d-key d-down" onclick="changePokemon(-1)"></div>
                    <div class="d-key d-left" onclick="changePokemon(-1)"></div>
                    <div class="d-key d-center"></div>
                </div>
            </div>
        </div>

        <div class="hinge"></div>

        <div id="right-panel" class="panel cartoon-shading">
            
            <div class="top-info-screen" id="info-screen">
                SYSTEM READY.
            </div>

            <div class="blue-grid-container">
                <div class="blue-square-btn" onclick="pressKey(1)">1</div>
                <div class="blue-square-btn" onclick="pressKey(2)">2</div>
                <div class="blue-square-btn" onclick="pressKey(3)">3</div>
                <div class="blue-square-btn" onclick="pressKey(4)">4</div>
                <div class="blue-square-btn" onclick="pressKey(5)">5</div>
                <div class="blue-square-btn" onclick="pressKey(6)">6</div>
                <div class="blue-square-btn" onclick="pressKey(7)">7</div>
                <div class="blue-square-btn" onclick="pressKey(8)">8</div>
                <div class="blue-square-btn" onclick="pressKey(9)">9</div>
                <div class="blue-square-btn" onclick="pressKey(0)">0</div>
            </div>

            <div class="misc-buttons-row">
                <div class="small-grey-btns-pair">
                    <div class="grey-square-btn" onclick="setMode('image')">IMG</div>
                    <div class="grey-square-btn" onclick="setMode('stats')">STAT</div>
                </div>
                <div class="gold-btn" onclick="submitSearch()">ENT</div>
            </div>

            <div class="vents-row">
                <div class="vent-box"><div class="vent-hole"></div><div class="vent-hole"></div><div class="vent-hole"></div></div>
                <div class="vent-box"><div class="vent-hole"></div><div class="vent-hole"></div><div class="vent-hole"></div></div>
            </div>

        </div>
    </div>

    <script>
        let currentId = 1;
        let currentData = null;
        let inputBuffer = ""; 
        const totalMons = 151;

        // Elements
        const screenContent = document.getElementById('screen-content');
        const statsCanvas = document.getElementById('stats-canvas');
        const info = document.getElementById('info-screen');
        const inputDisplay = document.getElementById('input-display');
        const ctx = statsCanvas.getContext('2d');

        window.onload = () => fetchMon(1);

        // --- CORE FETCH ---
        async function fetchMon(id) {
            screenContent.style.display = 'block';
            statsCanvas.style.display = 'none';
            screenContent.innerHTML = '<span style="color:white;">LOADING...</span>';
            inputDisplay.innerText = `ID: ${id}`;
            info.innerHTML = 'Retrieving Data...';

            try {
                const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
                const data = await res.json();
                currentData = data;
                render(data);
                inputBuffer = ""; // Reset typing buffer
            } catch (e) {
                info.innerHTML = "DATA ERROR.";
            }
        }

        function render(data) {
            // ANIMATED SPRITE (Gen 5)
            const img = data.sprites.versions['generation-v']['black-white'].animated.front_default || data.sprites.front_default;
            
            screenContent.innerHTML = `<img id="pokemon-image" src="${img}">`;

            const type = data.types.map(t => t.type.name.toUpperCase()).join('/');
            
            info.innerHTML = `
                NO. ${String(data.id).padStart(3, '0')}<br>
                NAME: ${data.name.toUpperCase()}<br>
                TYPE: ${type}<br>
                HT: ${data.height/10}m  WT: ${data.weight/10}kg
            `;

            drawStats(data);
        }

        // --- NAVIGATION & INPUT ---
        function changePokemon(dir) {
            currentId += dir;
            if (currentId > totalMons) currentId = 1;
            if (currentId < 1) currentId = totalMons;
            // Always revert to image view on change
            setMode('image');
            fetchMon(currentId);
            playCry();
        }

        function pressKey(num) {
            if (inputBuffer.length < 3) {
                inputBuffer += num;
                inputDisplay.innerText = inputBuffer;
            }
        }

        function submitSearch() {
            if (inputBuffer === "") return;
            let id = parseInt(inputBuffer);
            if (id > 0 && id <= totalMons) {
                currentId = id;
                fetchMon(currentId);
            } else {
                info.innerHTML = "ERR: 1-151 ONLY";
                inputBuffer = "";
                setTimeout(() => { info.innerHTML = "READY."; }, 2000);
            }
        }

        // --- MODES: IMAGE vs STATS ---
        function setMode(mode) {
            if (!currentData) return;

            if (mode === 'image') {
                screenContent.style.display = 'flex';
                statsCanvas.style.display = 'none';
            } else if (mode === 'stats') {
                screenContent.style.display = 'none';
                statsCanvas.style.display = 'block';
                drawStats(currentData);
            }
        }

        // --- STATS POLYGON DRAWING ---
        function drawStats(data) {
            // Stats: HP, Atk, Def, SpA, SpD, Spd
            // Normalize roughly to max 150 for Gen 1
            const stats = data.stats.map(s => s.base_stat);
            const labels = ["HP", "ATK", "DEF", "SPA", "SPD", "SPE"];
            const maxStat = 150; 
            
            // Resize canvas
            statsCanvas.width = 180;
            statsCanvas.height = 180;
            const cx = 90;
            const cy = 90;
            const radius = 70;

            ctx.clearRect(0, 0, 180, 180);
            
            // Draw Background Grid (Hexagon)
            ctx.strokeStyle = "#444";
            ctx.lineWidth = 1;
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = (Math.PI / 3) * i;
                const x = cx + radius * Math.cos(angle);
                const y = cy + radius * Math.sin(angle);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.stroke();

            // Draw Stat Polygon
            ctx.fillStyle = "rgba(100, 255, 100, 0.5)";
            ctx.strokeStyle = "#00ff00";
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const val = Math.min(stats[i], maxStat);
                const r = (val / maxStat) * radius;
                const angle = (Math.PI / 3) * i;
                const x = cx + r * Math.cos(angle);
                const y = cy + r * Math.sin(angle);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
                
                // Draw Label
                ctx.fillStyle = "white";
                ctx.font = "8px monospace";
                const lx = cx + (radius + 10) * Math.cos(angle) - 5;
                const ly = cy + (radius + 10) * Math.sin(angle) + 2;
                ctx.fillText(labels[i], lx, ly);
            }
            ctx.closePath();
            ctx.stroke();
            ctx.fill();
        }

        function playCry() {
            const aud = new Audio(`https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${currentId}.ogg`);
            aud.volume = 0.5;
            aud.play().catch(() => {});
        }
    </script>
</body>
</html>
