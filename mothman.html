<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mothman Global Rules Tracker</title>
    <style>
        :root {
            --pip-green: #1eff00;
            --pip-dim: #124d06;
            --bg-color: #0d110d;
            --scanline: rgba(30, 255, 0, 0.05);
        }

        body {
            background-color: var(--bg-color);
            color: var(--pip-green);
            font-family: "Courier New", Courier, monospace;
            margin: 0;
            padding: 20px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            touch-action: manipulation; /* Optimizes for iPad touch */
        }

        /* Scanline effect */
        body::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        header {
            text-align: center;
            border-bottom: 2px solid var(--pip-green);
            padding-bottom: 10px;
            margin-bottom: 20px;
            flex-shrink: 0;
        }

        h1 {
            margin: 0;
            font-size: 1.5rem;
            text-shadow: 0 0 5px var(--pip-green);
        }

        .container {
            display: flex;
            flex: 1;
            gap: 20px;
            overflow: hidden;
        }

        /* Left Column: The Card Toggles */
        .card-grid {
            flex: 2;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .toggle-btn {
            background: transparent;
            border: 2px solid var(--pip-dim);
            color: var(--pip-dim);
            padding: 15px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: bold;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 80px;
        }

        .toggle-btn.active {
            border-color: var(--pip-green);
            color: var(--bg-color);
            background-color: var(--pip-green);
            box-shadow: 0 0 15px var(--pip-green);
        }

        .toggle-btn small {
            font-size: 0.7rem;
            margin-top: 5px;
            display: block;
            opacity: 0.8;
        }

        /* Right Column: Active Rules Summary */
        .status-panel {
            flex: 1.5;
            border: 2px solid var(--pip-green);
            padding: 15px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            background: rgba(0, 20, 0, 0.5);
        }

        .status-header {
            font-weight: bold;
            text-decoration: underline;
            margin-bottom: 10px;
        }

        #active-effects-list {
            flex: 1;
            overflow-y: auto;
            list-style-type: none;
            padding: 0;
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        #active-effects-list li {
            margin-bottom: 12px;
            padding-left: 15px;
            position: relative;
        }

        #active-effects-list li::before {
            content: ">>";
            position: absolute;
            left: 0;
            color: var(--pip-green);
        }

        /* Counter Section */
        .rad-tracker {
            margin-top: 20px;
            border-top: 1px dashed var(--pip-green);
            padding-top: 10px;
            text-align: center;
        }
        
        .counter-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 10px;
        }

        .c-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--pip-green);
            background: black;
            color: var(--pip-green);
            font-size: 1.5rem;
            touch-action: manipulation;
        }

        .c-val {
            font-size: 2rem;
            font-weight: bold;
        }

    </style>
</head>
<body>

<header>
    <h1>VAULT-TEC :: COMMANDER INTERFACE</h1>
    <div style="font-size: 0.8rem;">UNIT: THE WISE MOTHMAN</div>
</header>

<div class="container">
    <div class="card-grid" id="cardGrid">
        </div>

    <div class="status-panel">
        <div class="status-header">CURRENT BOARD STATE PROTOCOLS</div>
        <ul id="active-effects-list">
            <li>System Idle. Select active cards.</li>
        </ul>

        <div class="rad-tracker">
            <div>GLOBAL RADIATION COUNTERS</div>
            <div class="counter-controls">
                <button class="c-btn" onclick="adjustRad(-1)">-</button>
                <span class="c-val" id="radCount">0</span>
                <button class="c-btn" onclick="adjustRad(1)">+</button>
            </div>
            <div style="font-size: 0.7rem; margin-top:5px;">(Triggers mill & dmg on Pre-Combat Main)</div>
        </div>
    </div>
</div>

<script>
    // The specific cards from your deck that affect opponents globally
    const cards = [
        {
            name: "The Wise Mothman",
            effect: "Whenever a non-land card is milled, put a +1/+1 counter on target creature X times.",
            flavor: "COMMANDER"
        },
        {
            name: "Bruvac the Grandiloquent",
            effect: "OPPONENTS MILL TWICE AS MANY CARDS.",
            flavor: "Replacement Effect"
        },
        {
            name: "Bloodchief Ascension",
            effect: "If card goes to opponent grave from anywhere: They lose 2 life, you gain 2 life. (Needs 3 counters)",
            flavor: "Enchantment"
        },
        {
            name: "Mesmeric Orb",
            effect: "Whenever a player untaps a permanent, they mill 1 card.",
            flavor: "Artifact"
        },
        {
            name: "Syr Konrad, the Grim",
            effect: "Creature dies OR creature into grave from library/hand/exile -> Deal 1 damage to each opponent.",
            flavor: "Creature"
        },
        {
            name: "The Mindskinner",
            effect: "If a source you control deals damage to opponent, prevent it. They MILL that much instead.",
            flavor: "Replacement Effect"
        },
        {
            name: "Dictate of Erebos",
            effect: "When a creature you control dies, each opponent sacrifices a creature.",
            flavor: "Enchantment"
        },
        {
            name: "Zellix, Sanity Flayer",
            effect: "Whenever a player mills a creature card, you create a 1/1 Horror token.",
            flavor: "Background/Creature"
        },
        {
            name: "Mindcrank",
            effect: "Whenever an opponent loses life, they mill that many cards.",
            flavor: "Artifact"
        },
        {
            name: "Nuclear Fallout",
            effect: "Creatures get -X/-X. Each player gets double X Rad counters.",
            flavor: "Sorcery"
        },
        {
            name: "Consuming Aberration",
            effect: "Whenever you cast a spell, opponents grind until they hit a land.",
            flavor: "Creature"
        },
        {
            name: "Psychic Corrosion",
            effect: "Whenever you draw a card, each opponent mills 2.",
            flavor: "Enchantment (Assumed)"
        }
    ];

    const grid = document.getElementById('cardGrid');
    const list = document.getElementById('active-effects-list');
    let activeCards = new Set();
    let rads = 0;

    // Initialize Grid
    cards.forEach((card, index) => {
        const btn = document.createElement('button');
        btn.className = 'toggle-btn';
        btn.innerHTML = `<span>${card.name}</span><small>${card.flavor}</small>`;
        btn.onclick = () => toggleCard(index, btn);
        grid.appendChild(btn);
    });

    function toggleCard(index, btnElement) {
        if (activeCards.has(index)) {
            activeCards.delete(index);
            btnElement.classList.remove('active');
        } else {
            activeCards.add(index);
            btnElement.classList.add('active');
        }
        updateDisplay();
    }

    function updateDisplay() {
        list.innerHTML = '';
        
        if (activeCards.size === 0) {
            list.innerHTML = '<li>System Idle. Select active cards.</li>';
            return;
        }

        // Special Check for Bruvac + Mindskinner interaction
        let hasBruvac = false;
        let hasMindskinner = false;

        // Render List
        activeCards.forEach(index => {
            const card = cards[index];
            if(card.name.includes("Bruvac")) hasBruvac = true;
            if(card.name.includes("Mindskinner")) hasMindskinner = true;

            const li = document.createElement('li');
            li.innerHTML = `<strong>${card.name}:</strong> ${card.effect}`;
            list.appendChild(li);
        });

        // Computed Interactions
        if (hasBruvac && hasMindskinner) {
             const li = document.createElement('li');
             li.style.color = "#ff3333";
             li.innerHTML = `<strong>WARNING:</strong> Combat Damage is prevented. They mill DOUBLE the damage dealt.`;
             list.appendChild(li);
        }
    }

    function adjustRad(amount) {
        rads += amount;
        if (rads < 0) rads = 0;
        document.getElementById('radCount').innerText = rads;
    }
</script>

</body>
</html>
