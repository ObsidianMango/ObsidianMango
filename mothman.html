<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mothman Global Rules</title>
    <style>
        :root {
            --pip-green: #1eff00;
            --pip-dim: #124d06;
            --bg-color: #0d110d;
        }

        body {
            background-color: var(--bg-color);
            color: var(--pip-green);
            font-family: "Courier New", Courier, monospace;
            margin: 0;
            padding: 15px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            -webkit-user-select: none; /* Disable text selection for app-feel */
            user-select: none;
        }

        /* Scanline Effect */
        body::after {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
            opacity: 0.3;
        }

        header {
            text-align: center;
            border-bottom: 2px solid var(--pip-green);
            padding-bottom: 10px;
            margin-bottom: 15px;
            flex-shrink: 0;
            z-index: 11;
        }

        h1 { margin: 0; font-size: 1.2rem; letter-spacing: 2px; }
        .subtitle { font-size: 0.7rem; opacity: 0.8; }

        .main-layout {
            display: flex;
            flex: 1;
            gap: 15px;
            overflow: hidden;
            z-index: 11;
        }

        /* LEFT: Toggles */
        .card-grid {
            flex: 1.5;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            overflow-y: auto;
            padding-bottom: 20px;
        }

        .toggle-btn {
            background: rgba(0, 20, 0, 0.6);
            border: 1px solid var(--pip-dim);
            color: var(--pip-dim);
            padding: 12px;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: bold;
            text-align: left;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 60px;
            transition: all 0.1s;
        }

        .toggle-btn.active {
            border-color: var(--pip-green);
            background-color: var(--pip-green);
            color: black;
            box-shadow: 0 0 10px var(--pip-green);
        }

        .toggle-btn small {
            font-size: 0.65rem;
            margin-top: 4px;
            opacity: 0.7;
            font-weight: normal;
        }

        /* RIGHT: Active Rules */
        .rules-panel {
            flex: 2;
            border: 2px solid var(--pip-green);
            background: rgba(0, 10, 0, 0.8);
            padding: 15px;
            display: flex;
            flex-direction: column;
            border-radius: 6px;
        }

        .rules-title {
            text-decoration: underline;
            margin-bottom: 10px;
            font-weight: bold;
            text-align: center;
        }

        #rules-list {
            flex: 1;
            overflow-y: auto;
            list-style: none;
            padding: 0;
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        #rules-list li {
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 2px solid var(--pip-green);
        }
        
        .highlight-warning {
            color: #ff5555;
            border-left: 2px solid #ff5555 !important;
            font-weight: bold;
        }

    </style>
</head>
<body>

<header>
    <h1>PIP-BOY 3000</h1>
    <div class="subtitle">THREAT ASSESSMENT PROTOCOL: ACTIVE</div>
</header>

<div class="main-layout">
    <div class="card-grid" id="cardGrid">
        </div>

    <div class="rules-panel">
        <div class="rules-title">ACTIVE GLOBAL EFFECTS</div>
        <ul id="rules-list">
            <li style="border:none; opacity:0.5;">> No active signatures detected.</li>
        </ul>
    </div>
</div>

<script>
    // Comprehensive list of cards that affect opponents or game rules
    const database = [
        { name: "The Wise Mothman", type: "Commander", text: "Attack: Target defending player gets Rads. <br>Mill Trigger: Put +1/+1 counters on X target creatures (X = non-lands milled)." },
        { name: "Bruvac the Grandiloquent", type: "Replacement", text: "If an opponent would mill cards, they mill TWICE that many instead." },
        { name: "Bloodchief Ascension", type: "Enchantment", text: "Landfall -> Counter. <br>If 3+ counters: When card hits opponent GY from ANYWHERE, they take 2 dmg, you gain 2 life." },
        { name: "Mesmeric Orb", type: "Artifact", text: "Whenever a player untaps a permanent, they mill 1 card." },
        { name: "Syr Konrad, the Grim", type: "Creature", text: "Deal 1 dmg to EACH opponent if: Creature dies, or creature enters/leaves GY (from library/exile)." },
        { name: "The Mindskinner", type: "Replacement", text: "Prevent all combat damage you deal to opponents. They MILL that much instead." },
        { name: "Dictate of Erebos", type: "Enchantment", text: "Flash. Whenever a creature you control dies, each opponent sacrifices a creature." },
        { name: "Zellix, Sanity Flayer", type: "Creature", text: "Whenever a player mills a creature card, you create a 1/1 Horror." },
        { name: "Mindcrank", type: "Artifact", text: "Whenever an opponent loses life, they mill that many cards." },
        { name: "Consuming Aberration", type: "Trigger", text: "Cast a spell -> Opponents grind until they reveal a land." },
        { name: "Screeching Scorchbeast", type: "Creature", text: "Player Upkeep -> That player gets 2 Rad counters." },
        { name: "Glowing One", type: "Creature", text: "Player Upkeep -> If they have Rads, they mill 1. <br>Dies -> All opponents get 4 Rad counters." },
        { name: "Struggle for Project Purity", type: "Enchantment", text: "Enclave Mode: Whenever you draw a card, each opponent gets 1 Rad counter." },
        { name: "Mariposa Military Base", type: "Land", text: "Attack Trigger: Target defending player gets 1 Rad counter." },
        { name: "The Master, Transcendent", type: "Creature", text: "ETB: Everyone mills 2 Rads. <br>Tap: Put creature from GY to battlefield (if milled this turn)." },
        { name: "Bloatfly Swarm", type: "Creature", text: "If damaged: Give target player Rads equal to damage. <br>Dies: Proliferate." },
        { name: "Codex Shredder", type: "Artifact", text: "Tap: Target player mills 1." },
        { name: "Vault 12: The Necropolis", type: "Enchantment", text: "Level 1: All players get Rads. <br>Level 2: Tap -> Create tokens based on Zombies/Mutants." },
        { name: "Evolution Sage", type: "Proliferate", text: "Landfall -> Proliferate (Multiplies Rad counters)." },
        { name: "Flux Channeler", type: "Proliferate", text: "Cast Noncreature -> Proliferate (Multiplies Rad counters)." },
        { name: "Inexorable Tide", type: "Proliferate", text: "Cast Spell -> Proliferate (Multiplies Rad counters)." },
        { name: "Thrummingbird", type: "Proliferate", text: "Combat Dmg to player -> Proliferate (Multiplies Rad counters)." }
    ];

    const grid = document.getElementById('cardGrid');
    const list = document.getElementById('rules-list');
    let activeIndices = new Set();

    // Init Grid
    database.forEach((card, index) => {
        const btn = document.createElement('button');
        btn.className = 'toggle-btn';
        btn.innerHTML = `<span>${card.name}</span><small>${card.type}</small>`;
        btn.onclick = () => toggle(index, btn);
        grid.appendChild(btn);
    });

    function toggle(index, btn) {
        if (activeIndices.has(index)) {
            activeIndices.delete(index);
            btn.classList.remove('active');
        } else {
            activeIndices.add(index);
            btn.classList.add('active');
        }
        render();
    }

    function render() {
        list.innerHTML = '';
        if (activeIndices.size === 0) {
            list.innerHTML = '<li style="border:none; opacity:0.5;">> No active signatures detected.</li>';
            return;
        }

        // Logic check for Bruvac + Mindskinner
        let bruvac = false;
        let mindskinner = false;

        activeIndices.forEach(idx => {
            const card = database[idx];
            if(card.name.includes("Bruvac")) bruvac = true;
            if(card.name.includes("Mindskinner")) mindskinner = true;

            const li = document.createElement('li');
            li.innerHTML = `<strong>${card.name}:</strong> ${card.text}`;
            list.appendChild(li);
        });

        if (bruvac && mindskinner) {
            const warning = document.createElement('li');
            warning.className = "highlight-warning";
            warning.innerHTML = "INTERACTION ALERT: Combat damage is prevented. Opponents mill DOUBLE the intended damage.";
            list.prepend(warning);
        }
    }
</script>

</body>
</html>
